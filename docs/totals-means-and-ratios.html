<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3.2 Totals, means and ratios | CHAPTER 9 - EXAMPLES IN R</title>
  <meta name="description" content="3.2 Totals, means and ratios | CHAPTER 9 - EXAMPLES IN R" />
  <meta name="generator" content="bookdown 0.41 and GitBook 2.6.7" />

  <meta property="og:title" content="3.2 Totals, means and ratios | CHAPTER 9 - EXAMPLES IN R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="3.2 Totals, means and ratios | CHAPTER 9 - EXAMPLES IN R" />
  <meta name="github-repo" content="psirusteam/chapter9Rcodes" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3.2 Totals, means and ratios | CHAPTER 9 - EXAMPLES IN R" />
  
  <meta name="twitter:description" content="3.2 Totals, means and ratios | CHAPTER 9 - EXAMPLES IN R" />
  

<meta name="author" content="" />


<meta name="date" content="2025-03-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="frequencies-and-proportions.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">CHAPTER 9 - EXAMPLES IN R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Abstract</a></li>
<li class="chapter" data-level="" data-path="accounting-for-the-sampling-design.html"><a href="accounting-for-the-sampling-design.html"><i class="fa fa-check"></i>Accounting for the Sampling Design</a>
<ul>
<li class="chapter" data-level="" data-path="sample-design-of-the-ess4-20182019.html"><a href="sample-design-of-the-ess4-20182019.html"><i class="fa fa-check"></i>Sample design of the ESS4 2018/2019</a></li>
<li class="chapter" data-level="" data-path="data-source.html"><a href="data-source.html"><i class="fa fa-check"></i>Data Source</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="using-software-to-generate-valid-inferences.html"><a href="using-software-to-generate-valid-inferences.html"><i class="fa fa-check"></i>2.3 Using Software to Generate Valid Inferences</a>
<ul>
<li class="chapter" data-level="" data-path="using-software-to-generate-valid-inferences.html"><a href="using-software-to-generate-valid-inferences.html#prepare-the-work-environment"><i class="fa fa-check"></i>Prepare the work environment</a></li>
<li class="chapter" data-level="" data-path="using-software-to-generate-valid-inferences.html"><a href="using-software-to-generate-valid-inferences.html#loading-datasets"><i class="fa fa-check"></i>Loading Datasets</a></li>
<li class="chapter" data-level="" data-path="using-software-to-generate-valid-inferences.html"><a href="using-software-to-generate-valid-inferences.html#defining-the-survey-design"><i class="fa fa-check"></i>Defining the survey design</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="frequencies-and-proportions.html"><a href="frequencies-and-proportions.html"><i class="fa fa-check"></i>3.1 Frequencies and Proportions</a>
<ul>
<li class="chapter" data-level="" data-path="frequencies-and-proportions.html"><a href="frequencies-and-proportions.html#prepare-the-work-environment-1"><i class="fa fa-check"></i>Prepare the work environment</a></li>
<li class="chapter" data-level="" data-path="frequencies-and-proportions.html"><a href="frequencies-and-proportions.html#estimating-totals-and-proportions"><i class="fa fa-check"></i>Estimating totals and proportions</a></li>
<li class="chapter" data-level="" data-path="frequencies-and-proportions.html"><a href="frequencies-and-proportions.html#formatting-and-presenting-results"><i class="fa fa-check"></i>Formatting and presenting results</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="totals-means-and-ratios.html"><a href="totals-means-and-ratios.html"><i class="fa fa-check"></i>3.2 Totals, means and ratios</a>
<ul>
<li class="chapter" data-level="" data-path="totals-means-and-ratios.html"><a href="totals-means-and-ratios.html#prepare-the-work-environment-2"><i class="fa fa-check"></i>Prepare the work environment</a></li>
<li class="chapter" data-level="" data-path="totals-means-and-ratios.html"><a href="totals-means-and-ratios.html#estimation-of-totals-and-means"><i class="fa fa-check"></i>Estimation of totals and means</a></li>
</ul></li>
<li class="divider"></li>
<li><a CHAPTER 9 - EXAMPLES IN R </a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">CHAPTER 9 - EXAMPLES IN R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="totals-means-and-ratios" class="section level1 unnumbered hasAnchor">
<h1>3.2 Totals, means and ratios<a href="totals-means-and-ratios.html#totals-means-and-ratios" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="prepare-the-work-environment-2" class="section level3 unnumbered hasAnchor">
<h3>Prepare the work environment<a href="totals-means-and-ratios.html#prepare-the-work-environment-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This block resets the working environment and loads the necessary packages to continue with data processing and survey analysis in a new section. This structure ensures that each module of the analysis can be executed independently, promoting reproducibility and avoiding conflicts with previous sessions.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="totals-means-and-ratios.html#cb19-1" tabindex="-1"></a><span class="co">#------------------------------------------------------------------------------#</span></span>
<span id="cb19-2"><a href="totals-means-and-ratios.html#cb19-2" tabindex="-1"></a><span class="co">#                           Cleaning R Environment                             #</span></span>
<span id="cb19-3"><a href="totals-means-and-ratios.html#cb19-3" tabindex="-1"></a><span class="co">#------------------------------------------------------------------------------#</span></span>
<span id="cb19-4"><a href="totals-means-and-ratios.html#cb19-4" tabindex="-1"></a></span>
<span id="cb19-5"><a href="totals-means-and-ratios.html#cb19-5" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb19-6"><a href="totals-means-and-ratios.html#cb19-6" tabindex="-1"></a><span class="fu">gc</span>()</span></code></pre></div>
<pre><code>##          used (Mb) gc trigger (Mb) max used (Mb)
## Ncells 542333 29.0    1219280 65.2   660485 35.3
## Vcells 955470  7.3    8388608 64.0  1770406 13.6</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="totals-means-and-ratios.html#cb21-1" tabindex="-1"></a><span class="co">#------------------------------------------------------------------------------#</span></span>
<span id="cb21-2"><a href="totals-means-and-ratios.html#cb21-2" tabindex="-1"></a><span class="co">#                                Libraries                                     #</span></span>
<span id="cb21-3"><a href="totals-means-and-ratios.html#cb21-3" tabindex="-1"></a><span class="co">#------------------------------------------------------------------------------#</span></span>
<span id="cb21-4"><a href="totals-means-and-ratios.html#cb21-4" tabindex="-1"></a></span>
<span id="cb21-5"><a href="totals-means-and-ratios.html#cb21-5" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb21-6"><a href="totals-means-and-ratios.html#cb21-6" tabindex="-1"></a><span class="fu">library</span>(survey)</span>
<span id="cb21-7"><a href="totals-means-and-ratios.html#cb21-7" tabindex="-1"></a><span class="fu">library</span>(srvyr)</span>
<span id="cb21-8"><a href="totals-means-and-ratios.html#cb21-8" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb21-9"><a href="totals-means-and-ratios.html#cb21-9" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb21-10"><a href="totals-means-and-ratios.html#cb21-10" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb21-11"><a href="totals-means-and-ratios.html#cb21-11" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb21-12"><a href="totals-means-and-ratios.html#cb21-12" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb21-13"><a href="totals-means-and-ratios.html#cb21-13" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb21-14"><a href="totals-means-and-ratios.html#cb21-14" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb21-15"><a href="totals-means-and-ratios.html#cb21-15" tabindex="-1"></a></span>
<span id="cb21-16"><a href="totals-means-and-ratios.html#cb21-16" tabindex="-1"></a><span class="co"># Ensure select function from dplyr is used explicitly</span></span>
<span id="cb21-17"><a href="totals-means-and-ratios.html#cb21-17" tabindex="-1"></a>select <span class="ot">&lt;-</span> dplyr<span class="sc">::</span>select</span>
<span id="cb21-18"><a href="totals-means-and-ratios.html#cb21-18" tabindex="-1"></a></span>
<span id="cb21-19"><a href="totals-means-and-ratios.html#cb21-19" tabindex="-1"></a><span class="co">#------------------------------------------------------------------------------#</span></span>
<span id="cb21-20"><a href="totals-means-and-ratios.html#cb21-20" tabindex="-1"></a><span class="co">#                        Setting the RAM Memory Limit                          #</span></span>
<span id="cb21-21"><a href="totals-means-and-ratios.html#cb21-21" tabindex="-1"></a><span class="co">#------------------------------------------------------------------------------#</span></span>
<span id="cb21-22"><a href="totals-means-and-ratios.html#cb21-22" tabindex="-1"></a></span>
<span id="cb21-23"><a href="totals-means-and-ratios.html#cb21-23" tabindex="-1"></a><span class="fu">memory.limit</span>(<span class="dv">250000000</span>)</span></code></pre></div>
<pre><code>## [1] Inf</code></pre>
<p>This block loads data from section 7b of the household questionnaire, related to expenditures on nonfood items, and calculates the total expenditure per household. It then defines the survey design using the same stratification structure and primary sampling units as in previous sections, in order to apply the adjusted weights in the analysis. This step is essential to produce representative estimates of expenditure and its distribution across households.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="totals-means-and-ratios.html#cb23-1" tabindex="-1"></a><span class="co">#------------------------------------------------------------------------------#</span></span>
<span id="cb23-2"><a href="totals-means-and-ratios.html#cb23-2" tabindex="-1"></a><span class="co">#                           Loading Datasets                                   #</span></span>
<span id="cb23-3"><a href="totals-means-and-ratios.html#cb23-3" tabindex="-1"></a><span class="co">#------------------------------------------------------------------------------#</span></span>
<span id="cb23-4"><a href="totals-means-and-ratios.html#cb23-4" tabindex="-1"></a></span>
<span id="cb23-5"><a href="totals-means-and-ratios.html#cb23-5" tabindex="-1"></a>HH_data <span class="ot">&lt;-</span> <span class="fu">read_sav</span>(<span class="st">&quot;data/data_ESS4/sect7b_hh_w4_v2.sav&quot;</span>)</span>
<span id="cb23-6"><a href="totals-means-and-ratios.html#cb23-6" tabindex="-1"></a></span>
<span id="cb23-7"><a href="totals-means-and-ratios.html#cb23-7" tabindex="-1"></a><span class="co">#------------------------------------------------------------------------------#</span></span>
<span id="cb23-8"><a href="totals-means-and-ratios.html#cb23-8" tabindex="-1"></a><span class="co">#                Calculating Ratio of Expenditures                            #</span></span>
<span id="cb23-9"><a href="totals-means-and-ratios.html#cb23-9" tabindex="-1"></a><span class="co">#------------------------------------------------------------------------------#</span></span>
<span id="cb23-10"><a href="totals-means-and-ratios.html#cb23-10" tabindex="-1"></a></span>
<span id="cb23-11"><a href="totals-means-and-ratios.html#cb23-11" tabindex="-1"></a><span class="co"># Processing data</span></span>
<span id="cb23-12"><a href="totals-means-and-ratios.html#cb23-12" tabindex="-1"></a>HH_data <span class="ot">&lt;-</span> HH_data <span class="sc">%&gt;%</span></span>
<span id="cb23-13"><a href="totals-means-and-ratios.html#cb23-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">expenditure =</span> <span class="fu">ifelse</span>(s7q03 <span class="sc">==</span> <span class="dv">2</span>, <span class="dv">0</span>, s7q04)) <span class="sc">%&gt;%</span></span>
<span id="cb23-14"><a href="totals-means-and-ratios.html#cb23-14" tabindex="-1"></a>  <span class="fu">group_by</span>(household_id) <span class="sc">%&gt;%</span></span>
<span id="cb23-15"><a href="totals-means-and-ratios.html#cb23-15" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_expenditure =</span> <span class="fu">sum</span>(expenditure, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb23-16"><a href="totals-means-and-ratios.html#cb23-16" tabindex="-1"></a></span>
<span id="cb23-17"><a href="totals-means-and-ratios.html#cb23-17" tabindex="-1"></a><span class="co"># Defining the survey design</span></span>
<span id="cb23-18"><a href="totals-means-and-ratios.html#cb23-18" tabindex="-1"></a>ESS4_design <span class="ot">&lt;-</span> HH_data <span class="sc">%&gt;%</span></span>
<span id="cb23-19"><a href="totals-means-and-ratios.html#cb23-19" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">strata =</span> <span class="fu">paste0</span>(saq01, <span class="st">&quot;_&quot;</span>, saq14)) <span class="sc">%&gt;%</span></span>
<span id="cb23-20"><a href="totals-means-and-ratios.html#cb23-20" tabindex="-1"></a>  <span class="fu">as_survey_design</span>(</span>
<span id="cb23-21"><a href="totals-means-and-ratios.html#cb23-21" tabindex="-1"></a>    <span class="at">ids =</span> ea_id,</span>
<span id="cb23-22"><a href="totals-means-and-ratios.html#cb23-22" tabindex="-1"></a>    <span class="co"># Primary sampling unit identifier (EA)</span></span>
<span id="cb23-23"><a href="totals-means-and-ratios.html#cb23-23" tabindex="-1"></a>    <span class="at">strata =</span> strata,</span>
<span id="cb23-24"><a href="totals-means-and-ratios.html#cb23-24" tabindex="-1"></a>    <span class="co"># Stratification by region (saq01) and urban/rural zone (saq14)</span></span>
<span id="cb23-25"><a href="totals-means-and-ratios.html#cb23-25" tabindex="-1"></a>    <span class="at">weights =</span> pw_w4,</span>
<span id="cb23-26"><a href="totals-means-and-ratios.html#cb23-26" tabindex="-1"></a>    <span class="co"># Final adjusted weight</span></span>
<span id="cb23-27"><a href="totals-means-and-ratios.html#cb23-27" tabindex="-1"></a>    <span class="at">nest =</span> <span class="cn">TRUE</span></span>
<span id="cb23-28"><a href="totals-means-and-ratios.html#cb23-28" tabindex="-1"></a>  )</span>
<span id="cb23-29"><a href="totals-means-and-ratios.html#cb23-29" tabindex="-1"></a></span>
<span id="cb23-30"><a href="totals-means-and-ratios.html#cb23-30" tabindex="-1"></a><span class="fu">options</span>(<span class="at">survey.lonely.psu =</span> <span class="st">&quot;fail&quot;</span>)</span>
<span id="cb23-31"><a href="totals-means-and-ratios.html#cb23-31" tabindex="-1"></a><span class="fu">summary</span>(ESS4_design)</span></code></pre></div>
<pre><code>## Stratified 1 - level Cluster Sampling design (with replacement)
## With (535) clusters.
## Called via srvyr
## Probabilities:
##      Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
## 3.932e-05 1.997e-04 7.680e-04 2.814e-03 4.164e-03 1.317e-01 
## Stratum Sizes: 
##             1_1  1_2 12_1 12_2 13_1 13_2 14_2 15_1 15_2  2_1  2_2  3_1  3_2
## obs        4323 3113 2145 3300 2090 3960 8558 1760 4609 3289 2475 5269 2981
## design.PSU   35   19   19   20   18   24   52   14   28   28   15   43   18
## actual.PSU   35   19   19   20   18   24   52   14   28   28   15   43   18
##             4_1  4_2  5_1  5_2  6_1  6_2  7_1  7_2
## obs        4983 3300 3905 2805 1859 2145 4642 2959
## design.PSU   43   20   35   17   16   13   40   18
## actual.PSU   43   20   35   17   16   13   40   18
## Data variables:
##  [1] &quot;household_id&quot;      &quot;item_cd_12months&quot;  &quot;ea_id&quot;            
##  [4] &quot;saq14&quot;             &quot;pw_w4&quot;             &quot;saq01&quot;            
##  [7] &quot;saq02&quot;             &quot;saq03&quot;             &quot;saq04&quot;            
## [10] &quot;saq05&quot;             &quot;saq06&quot;             &quot;saq07&quot;            
## [13] &quot;saq08&quot;             &quot;s7q03&quot;             &quot;s7q04&quot;            
## [16] &quot;expenditure&quot;       &quot;total_expenditure&quot; &quot;strata&quot;</code></pre>
</div>
<div id="estimation-of-totals-and-means" class="section level3 unnumbered hasAnchor">
<h3>Estimation of totals and means<a href="totals-means-and-ratios.html#estimation-of-totals-and-means" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This block estimates the total expenditure and the average expenditure per household on nonfood items, disaggregated by item type. Using the previously defined survey design, the estimates are calculated along with their corresponding precision measures: standard error and coefficient of variation. The results are then rounded and displayed in a readable table to facilitate analysis and interpretation.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="totals-means-and-ratios.html#cb25-1" tabindex="-1"></a><span class="co">#------------------------------------------------------------------------------#</span></span>
<span id="cb25-2"><a href="totals-means-and-ratios.html#cb25-2" tabindex="-1"></a><span class="co"># Estimation of totals and means</span></span>
<span id="cb25-3"><a href="totals-means-and-ratios.html#cb25-3" tabindex="-1"></a><span class="co">#------------------------------------------------------------------------------#</span></span>
<span id="cb25-4"><a href="totals-means-and-ratios.html#cb25-4" tabindex="-1"></a></span>
<span id="cb25-5"><a href="totals-means-and-ratios.html#cb25-5" tabindex="-1"></a>tab_02 <span class="ot">&lt;-</span> ESS4_design <span class="sc">%&gt;%</span>   </span>
<span id="cb25-6"><a href="totals-means-and-ratios.html#cb25-6" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="at">item =</span> item_cd_12months) <span class="sc">%&gt;%</span></span>
<span id="cb25-7"><a href="totals-means-and-ratios.html#cb25-7" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb25-8"><a href="totals-means-and-ratios.html#cb25-8" tabindex="-1"></a>    <span class="at">T_hat =</span> <span class="fu">survey_total</span>(expenditure, <span class="at">na.rm =</span> <span class="cn">TRUE</span>, <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;cv&quot;</span>)),</span>
<span id="cb25-9"><a href="totals-means-and-ratios.html#cb25-9" tabindex="-1"></a>    <span class="at">M_hat =</span> <span class="fu">survey_mean</span>(expenditure, <span class="at">na.rm =</span> <span class="cn">TRUE</span>, <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;cv&quot;</span>))</span>
<span id="cb25-10"><a href="totals-means-and-ratios.html#cb25-10" tabindex="-1"></a>  )</span>
<span id="cb25-11"><a href="totals-means-and-ratios.html#cb25-11" tabindex="-1"></a></span>
<span id="cb25-12"><a href="totals-means-and-ratios.html#cb25-12" tabindex="-1"></a>tab_02 <span class="sc">%&gt;%</span></span>
<span id="cb25-13"><a href="totals-means-and-ratios.html#cb25-13" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb25-14"><a href="totals-means-and-ratios.html#cb25-14" tabindex="-1"></a>    <span class="at">item =</span> <span class="fu">as_factor</span>(item),</span>
<span id="cb25-15"><a href="totals-means-and-ratios.html#cb25-15" tabindex="-1"></a>    <span class="at">T_hat =</span> <span class="fu">round</span>(T_hat),</span>
<span id="cb25-16"><a href="totals-means-and-ratios.html#cb25-16" tabindex="-1"></a>    <span class="at">T_hat_cv =</span> <span class="fu">round</span>(T_hat_cv <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb25-17"><a href="totals-means-and-ratios.html#cb25-17" tabindex="-1"></a>    <span class="at">M_hat =</span> <span class="fu">round</span>(M_hat),</span>
<span id="cb25-18"><a href="totals-means-and-ratios.html#cb25-18" tabindex="-1"></a>    <span class="at">M_hat_cv =</span> <span class="fu">round</span>(M_hat_cv <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>)</span>
<span id="cb25-19"><a href="totals-means-and-ratios.html#cb25-19" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">data.frame</span>()</span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="totals-means-and-ratios.html#cb26-1" tabindex="-1"></a>tab_02 <span class="ot">&lt;-</span> ESS4_design <span class="sc">%&gt;%</span>   </span>
<span id="cb26-2"><a href="totals-means-and-ratios.html#cb26-2" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="at">item =</span> item_cd_12months) <span class="sc">%&gt;%</span></span>
<span id="cb26-3"><a href="totals-means-and-ratios.html#cb26-3" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb26-4"><a href="totals-means-and-ratios.html#cb26-4" tabindex="-1"></a>    <span class="at">T_hat =</span> <span class="fu">survey_total</span>(expenditure, <span class="at">na.rm =</span> <span class="cn">TRUE</span>, <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;cv&quot;</span>)),</span>
<span id="cb26-5"><a href="totals-means-and-ratios.html#cb26-5" tabindex="-1"></a>    <span class="at">M_hat =</span> <span class="fu">survey_mean</span>(expenditure, <span class="at">na.rm =</span> <span class="cn">TRUE</span>, <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;cv&quot;</span>))</span>
<span id="cb26-6"><a href="totals-means-and-ratios.html#cb26-6" tabindex="-1"></a>  )</span>
<span id="cb26-7"><a href="totals-means-and-ratios.html#cb26-7" tabindex="-1"></a></span>
<span id="cb26-8"><a href="totals-means-and-ratios.html#cb26-8" tabindex="-1"></a>tab_02 <span class="sc">%&gt;%</span></span>
<span id="cb26-9"><a href="totals-means-and-ratios.html#cb26-9" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb26-10"><a href="totals-means-and-ratios.html#cb26-10" tabindex="-1"></a>    <span class="at">item =</span> <span class="fu">as_factor</span>(item),</span>
<span id="cb26-11"><a href="totals-means-and-ratios.html#cb26-11" tabindex="-1"></a>    <span class="at">T_hat =</span> <span class="fu">round</span>(T_hat),</span>
<span id="cb26-12"><a href="totals-means-and-ratios.html#cb26-12" tabindex="-1"></a>    <span class="at">T_hat_cv =</span> <span class="fu">round</span>(T_hat_cv <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb26-13"><a href="totals-means-and-ratios.html#cb26-13" tabindex="-1"></a>    <span class="at">M_hat =</span> <span class="fu">round</span>(M_hat),</span>
<span id="cb26-14"><a href="totals-means-and-ratios.html#cb26-14" tabindex="-1"></a>    <span class="at">M_hat_cv =</span> <span class="fu">round</span>(M_hat_cv <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>)</span>
<span id="cb26-15"><a href="totals-means-and-ratios.html#cb26-15" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb26-16"><a href="totals-means-and-ratios.html#cb26-16" tabindex="-1"></a>   <span class="fu">kable</span>(<span class="at">format =</span> <span class="st">&quot;pipe&quot;</span>)</span></code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="69%" />
<col width="10%" />
<col width="7%" />
<col width="5%" />
<col width="7%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">item</th>
<th align="right">T_hat</th>
<th align="right">T_hat_cv</th>
<th align="right">M_hat</th>
<th align="right">M_hat_cv</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1. Clothes/shoes/fabric for MEN (18 years and older)</td>
<td align="right">14831623627</td>
<td align="right">5.16</td>
<td align="right">739</td>
<td align="right">5.10</td>
</tr>
<tr class="even">
<td align="left">2. Clothes/shoes/fabric for WOMEN (18 years and older)</td>
<td align="right">12372041190</td>
<td align="right">4.61</td>
<td align="right">617</td>
<td align="right">4.58</td>
</tr>
<tr class="odd">
<td align="left">3. Clothes/shoes/fabric for BOYS (less than 18 years)</td>
<td align="right">8240485360</td>
<td align="right">4.18</td>
<td align="right">411</td>
<td align="right">3.96</td>
</tr>
<tr class="even">
<td align="left">4. Clothes/shoes/fabric for GIRLS (less than 18 years)</td>
<td align="right">7093344006</td>
<td align="right">4.18</td>
<td align="right">353</td>
<td align="right">4.05</td>
</tr>
<tr class="odd">
<td align="left">5. Kitchen equipment (cooking pots, etc.)</td>
<td align="right">1546185290</td>
<td align="right">9.68</td>
<td align="right">77</td>
<td align="right">9.64</td>
</tr>
<tr class="even">
<td align="left">6. Linens (sheets, towels,blankets)</td>
<td align="right">3948547743</td>
<td align="right">7.58</td>
<td align="right">197</td>
<td align="right">7.53</td>
</tr>
<tr class="odd">
<td align="left">7. Furniture</td>
<td align="right">3204286706</td>
<td align="right">14.43</td>
<td align="right">160</td>
<td align="right">14.38</td>
</tr>
<tr class="even">
<td align="left">8. Lamp/torch/solare power</td>
<td align="right">1364016013</td>
<td align="right">12.61</td>
<td align="right">68</td>
<td align="right">12.58</td>
</tr>
<tr class="odd">
<td align="left">9. Ceremonial expenses</td>
<td align="right">26850995607</td>
<td align="right">6.39</td>
<td align="right">1338</td>
<td align="right">6.23</td>
</tr>
<tr class="even">
<td align="left">10. Contributions to informal social security institutions (inc. IDDIR, mahiber..)</td>
<td align="right">2939856749</td>
<td align="right">9.22</td>
<td align="right">146</td>
<td align="right">9.20</td>
</tr>
<tr class="odd">
<td align="left">11. Donations to religious institutions (Incl. churches and mosques..)</td>
<td align="right">3238210354</td>
<td align="right">10.25</td>
<td align="right">161</td>
<td align="right">9.89</td>
</tr>
</tbody>
</table>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="frequencies-and-proportions.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/psirusteam/chapter9Rcodes/3.2_Totals_means_and_ratios.rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["CHAPTER 9 - EXAMPLES IN R.pdf", "CHAPTER 9 - EXAMPLES IN R.epub", "CHAPTER 9 - EXAMPLES IN R.mobi"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
},
"tconfig": null
});
});
</script>

</body>

</html>
