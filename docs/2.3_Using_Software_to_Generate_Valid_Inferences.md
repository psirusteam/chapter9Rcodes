# Accounting for the Sampling Design

The Ethiopia Socioeconomic Survey (ESS4) is part of the Living Standards Measurement Study (LSMS), an initiative by the World Bank in collaboration with the Central Statistical Agency of Ethiopia (CSA). Its objective is to provide high-quality data for the analysis of poverty, food security, agricultural development, and other key socioeconomic aspects.

The ESS4 is part of a series of longitudinal surveys initiated in 2011 under the name Ethiopia Rural Socioeconomic Survey (ERSS). In its first two rounds, the survey only covered rural areas and small towns, but starting from the second wave (ESS2, 2013/2014), the coverage was expanded to all urban areas, ensuring nationally representative estimates. The ESS1, ESS2, and ESS3 waves constitute Panel I, while ESS4 initiates a new panel, serving as the baseline for future surveys.

The survey provides information on household structure, employment, income, consumption, education, health, access to infrastructure, and characteristics of the agricultural sector. One of its key features is the combination of household survey data with administrative records and remote sensing technologies, such as satellite imagery, to improve the accuracy of economic and social indicator estimates.

## Data Source {-}

The ESS4 was implemented by the CSA of Ethiopia, in collaboration with the World Bank and other international organizations. Data collection was conducted through direct interviews with selected households, using electronic devices through Computer-Assisted Personal Interviewing (CAPI). The database includes detailed information on:

-   Household structure and sociodemographic characteristics (age, gender, education, health).

-   Living conditions and economic well-being (income, consumption, access to services).

-   Housing characteristics (construction materials, access to drinking water, sanitation, and electricity).

-   Food security and agricultural production (crops, livestock, access to markets).

-   Access to financing and land tenure.

-   Mobility and migration (internal displacement and job seeking).

The ESS4 not only allows for the generation of descriptive statistics on the Ethiopian population but also facilitates longitudinal studies to assess changes in living conditions over time.

## 2.3 Using Software to Generate Valid Inferences {-}



### 2. **Loading Datasets**

The following chunk loads the dataset containing household identification, location, household size, and field staff information.


``` r
dat_Hogar <- read_sav("data/data_ESS4/sect_cover_hh_w4.sav") %>% 
  select(
    household_id,  # Unique Household Identifier
    ea_id,         # Unique Enumeration Area Identifier
    saq14,         # Rural/Urban Classification
    saq02,         # Region-specific Code
    saq01,         # Higher-level Region Code
    pw_w4          # Final adjusted weight for wave 4
  )
```

---

### 3. **Descriptive Analysis of Sampled Households**

#### **3.1 Table 1.1A - Enumeration Areas (EAs) and Households by Region and Urban/Rural Classification**

The **Ethiopia Socioeconomic Survey (ESS)** collects data from sampled **Enumeration Areas (EAs)** and **households**, which are categorized by region and rural/urban status.

#### **3.1.1 Counting Enumeration Areas (EAs) by Region and Rural/Urban Classification**


``` r
total_ea_id <- dat_Hogar %>% 
  distinct(ea_id, saq14, saq01) %>% 
  mutate(saq14 = as_factor(saq14), saq01 = as_factor(saq01)) %>% 
  group_by(saq01, saq14) %>% 
  tally() %>% 
  pivot_wider(names_from = saq14, values_from = n, values_fill = list(n = 0)) %>% 
  mutate(TOTAL_ea_id = RURAL + URBAN) %>% 
  rename_with(~ paste0(., "_ea_id"), c("RURAL", "URBAN"))

# Display first rows
kable(total_ea_id)
```



|saq01             | RURAL_ea_id| URBAN_ea_id| TOTAL_ea_id|
|:-----------------|-----------:|-----------:|-----------:|
|TIGRAY            |          35|          19|          54|
|AFAR              |          28|          15|          43|
|AMHARA            |          43|          18|          61|
|OROMIA            |          43|          20|          63|
|SOMALI            |          35|          17|          52|
|BENISHANGUL GUMUZ |          16|          13|          29|
|SNNP              |          40|          18|          58|
|GAMBELA           |          19|          20|          39|
|HARAR             |          18|          24|          42|
|ADDIS ABABA       |           0|          52|          52|
|DIRE DAWA         |          14|          28|          42|

#### **3.1.2 Counting Households by Region and Rural/Urban Classification**


``` r
total_viv <- dat_Hogar %>% 
  distinct(household_id, saq01, saq14) %>% 
  mutate(saq14 = as_factor(saq14), saq01 = as_factor(saq01)) %>% 
  group_by(saq01, saq14) %>% 
  tally() %>% 
  pivot_wider(names_from = saq14, values_from = n, values_fill = list(n = 0)) %>% 
  mutate(TOTAL_HH = RURAL + URBAN) %>% 
  rename_with(~ paste0(., "_HH"), c("RURAL", "URBAN"))

# Display first rows
kable(total_viv)
```



|saq01             | RURAL_HH| URBAN_HH| TOTAL_HH|
|:-----------------|--------:|--------:|--------:|
|TIGRAY            |      393|      283|      676|
|AFAR              |      299|      225|      524|
|AMHARA            |      479|      271|      750|
|OROMIA            |      453|      300|      753|
|SOMALI            |      355|      255|      610|
|BENISHANGUL GUMUZ |      169|      195|      364|
|SNNP              |      422|      269|      691|
|GAMBELA           |      195|      300|      495|
|HARAR             |      190|      360|      550|
|ADDIS ABABA       |        0|      778|      778|
|DIRE DAWA         |      160|      419|      579|

---

#### **3.2 Merging Household and EA Counts**

To obtain a summarized dataset, we merge the **household count** and **Enumeration Area (EA) count** datasets.


``` r
temp <- inner_join(total_viv, total_ea_id)
```

```
## Joining with `by = join_by(saq01)`
```

``` r
# Summarizing results with an additional row for "Ethiopia"
final_result <- bind_rows(
  temp,
  temp %>% data.frame() %>% summarise_if(is.numeric, sum) %>%
    mutate(saq01 = "Ethiopia")
) %>% 
  select(
    Region = saq01, 
    RURAL_HH, 
    RURAL_AE = RURAL_ea_id,
    URBAN_HH, 
    URBAN_AE =  URBAN_ea_id,
    TOTAL_HH,
    TOTAL_AE = TOTAL_ea_id
  ) %>% 
  data.frame()

# Display final table
kable(final_result, caption = "Sampled EAs and Households by Region and Urban/Rural Classification")
```



Table: (\#tab:merge-data)Sampled EAs and Households by Region and Urban/Rural Classification

|Region            | RURAL_HH| RURAL_AE| URBAN_HH| URBAN_AE| TOTAL_HH| TOTAL_AE|
|:-----------------|--------:|--------:|--------:|--------:|--------:|--------:|
|TIGRAY            |      393|       35|      283|       19|      676|       54|
|AFAR              |      299|       28|      225|       15|      524|       43|
|AMHARA            |      479|       43|      271|       18|      750|       61|
|OROMIA            |      453|       43|      300|       20|      753|       63|
|SOMALI            |      355|       35|      255|       17|      610|       52|
|BENISHANGUL GUMUZ |      169|       16|      195|       13|      364|       29|
|SNNP              |      422|       40|      269|       18|      691|       58|
|GAMBELA           |      195|       19|      300|       20|      495|       39|
|HARAR             |      190|       18|      360|       24|      550|       42|
|ADDIS ABABA       |        0|        0|      778|       52|      778|       52|
|DIRE DAWA         |      160|       14|      419|       28|      579|       42|
|Ethiopia          |     3115|      291|     3655|      244|     6770|      535|

---

### 4. **Defining Survey Design for Statistical Inference**

A **survey design object** is created to ensure that all subsequent statistical inferences properly account for the sampling structure.


``` r
design_sampling <- dat_Hogar %>% 
  mutate(strata = paste0(saq01, "_", saq14)) %>% 
  as_survey_design(
    ids = ea_id,  # Primary Sampling Unit (PSU) Identifier (EA)
    strata = strata,  # Stratification by region (saq01) and urban/rural zone (saq14)
    weights = pw_w4,  # Final adjusted weight
    nest = TRUE
  )

# Display survey design summary
summary(design_sampling)
```

```
## Stratified 1 - level Cluster Sampling design (with replacement)
## With (535) clusters.
## Called via srvyr
## Probabilities:
##      Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
## 3.932e-05 1.997e-04 7.680e-04 2.814e-03 4.164e-03 1.317e-01 
## Stratum Sizes: 
##            1_1 1_2 12_1 12_2 13_1 13_2 14_2 15_1 15_2 2_1 2_2 3_1 3_2 4_1 4_2
## obs        393 283  195  300  190  360  778  160  419 299 225 479 271 453 300
## design.PSU  35  19   19   20   18   24   52   14   28  28  15  43  18  43  20
## actual.PSU  35  19   19   20   18   24   52   14   28  28  15  43  18  43  20
##            5_1 5_2 6_1 6_2 7_1 7_2
## obs        355 255 169 195 422 269
## design.PSU  35  17  16  13  40  18
## actual.PSU  35  17  16  13  40  18
## Data variables:
## [1] "household_id" "ea_id"        "saq14"        "saq02"        "saq01"       
## [6] "pw_w4"        "strata"
```
